## 计量单位

在讲适配之前，我们要先介绍一下和设备有关的计量单位。知道这些计量单位以及它们之间的换算关系后，才能更好的理解后面要讲的屏幕适配方案。

**一、物理像素**

物理像素点是屏幕的自身属性，设备一出厂这个数值就是固定的了。

**二、逻辑像素 px**

我们在写样式的时候，用的最多的应该就是 px 这个单位，这个 px 就是逻辑像素。

下面放几组常见手机型号的物理像素和逻辑像素的值供参考：

| 设备名称              | 屏幕尺寸 | 物理像素(宽*高)   | 逻辑像素(宽*高) |
|:-----------------:|:----:|:-----------:|:---------:|
| iPhone X          | 5.8  | 1125 x 2436 | 375 x 812 |
| iPhone 8          | 4.7  | 750x1334    | 375x667   |
| iPhone 8+         | 5.5  | 1242 x 2208 | 414 x 736 |
| Samsung Galaxy S8 | 5.8  | 1440 x 2960 | 360 x 740 |
| HUAWEI P10        | 5.1  | 1080 x 1920 | 360 x 640 |
| 红米 4 (4, 4X)      | 5.0  | 720 x 1280  | 360 x 640 |

**三、设计像素**

设计像素是指 UI 设计师做设计稿时使用的像素值，通常情况下是按着设备的物理像素来确定设计稿尺寸的。

**四、相对像素 em 和 rem**

em 这个单位是相对于父元素的 font-size 字号值，实际就是父元素 font-size 的几倍。这个字号可以是 CSS 指定的，也可以是从父元素的父元素继承来的，如果前两个都没有，就会使用默认值（一般是16px）。

rem 是 CSS3 的属性，使用的时候要注意它的兼容性问题。**目前 rem 通常应用在移动端的 WEB 开发上**。

## 屏幕适配方案

**一、百分比方式适配**

百分比适配有如下优点：

1. 简单便捷，不用关心元素的绝对宽度。
2. 基本没有兼容性问题。

但是这种适配方式缺点也是很明显的：

1. 使用百分比时候，很容易不是整数，比如设计稿是一行里三个元素等分距离，如果用百分比，那每个的宽度就是 33.33333%。这样百分比是很长的小数，还要自己计算百分比的值，最严重的是经过百分比的计算后有可能最后整行宽度会留有空白。
2. 百分比的值是相对于父元素来计算的。子元素宽度的百分比是相对父元素宽度，子元素的高度的百分比是相对于父元素的高度，子元素的内外边距都是相对父元素的宽度，这些属性是相对谁的容易弄混。
3. 当同一行里同时存在定宽元素和自适应的元素时，使用百分比就不太利于分配空间。
4. 如果父子元素都脱离了文档流，那么它父元素的宽度就可能没有了，这时候子元素用百分比就会失效。

通过用百分比的方式适配的话，在一些情景下是非常方便的，比如一行内等距放 4 个元素，就可以每个元素 25% 的宽度，一条语句就可以搞定，但考虑到百分比适配的缺点，并不推荐所有地方都强制使用百分比进行适配。我们的项目中，用到百分比适配比较多的是需要撑开整个屏幕的情况，如头部标题栏、导航和全屏宽的按钮等设置宽度的时候，就可以直接给元素“width: 100%；”。

**二、多套样式分段适配**

我们要说的第二种适配方案就是制作多套样式，然后根据屏幕宽度来选择合适的那套样式。这种适配方式一般是在 HTML 或 body 上添加一些 class 来控制。

我们以京东的 PC 端页面为例，当浏览器宽度大于 1190px 时，就会在 HTML 标签上加上 o2_wide 的 class，这时候页面的主要内容区也是定宽 1190px 的一个框子。当浏览器小于 1190px时，就会把 o2_wide 变成 o2_mini，这时候主要显示区的宽度就变成了 990px。京东实际上是实现了两种宽度的页面，然后通过 JS 判断页面宽度来选择应用哪一套。

淘宝的 PC 端会做的更精细一点，会把适配方案分成 990px、1024px、1190px、1279px、1365px、1440px 这些档，对每一种宽度都做了一套样式。然后也是通过 JS 控制 body 上的 class 来控制生效的样式。

上面两个例子都是使用 JS 来控制 DOM 元素上的 class 来实现的，在 CSS3 中还有一种控制方式叫媒体查询。媒体查询可以直接用 CSS 根据浏览器页面宽度判断使用哪套样式方案。原理和上面的一样，只不过用媒体查询代替了上面的 JS 逻辑。

这种适配方案有如下的优点：

1. 更灵活，比如可以借助根节点上的 class 来控制更多的内容。比如在宽屏幕上指定一行显示 4 个元素（每个宽 25%），如果在窄屏幕上可以让一行显示 5 个（每个宽 20%）。
2. 页面宽度是固定的几档，测试的时候比较方便。
3. 使用 JS 控制 class 的方式一般不会出现兼容性问题，通常应用在有兼容性要求的 PC 端页面。

但这种方式的不足也比较明显：

1. 需要制作多套设计稿，也需要多套样式代码，工作量比较大。
2. 要维护多套样式，有改动的时候比较麻烦。
3. 不能在所有设备下都撑满全屏，不适合移动端。

这种适配方案在适配时一般都是设计一套基准宽度的样式，其他宽度下的样式用覆盖的方式来控制。

**三、Rem 方式适配**

最后就是要说 Rem 方式的适配了。我们之前讲了 Rem 的用法，在做屏幕适配的时候，我们通过控制 HTML 的　font-size 属性就可以了。

第一步，限定基准尺寸屏幕下的 HTML 字号。我通常会给 HTML 节点设置上 20px 的字体，这样做 px 到 rem 的转换时比较容易，比如我需要 18px 的宽度，那就可以很快的把 18px 换算成 .9rem。

第二步，在其他尺寸屏幕上，修改 HTML 字号值。在 rem 适配中，因为只需要控制 HTML 字号就可以达到屏幕适配的目的。而在变动这个字号的时候可以像百分比适配那样做连续的变动，直接按着屏幕宽度和标准尺寸的比例关系修改字号即可；也可以用分段适配的方式，在某一个宽度范围内用哪一种字号。对字号的控制还是比较灵活的。

Rem 适配的优点：

1. Rem 的参考值只有一个，就是 HTML 字体大小，所以不会像百分比适配那样要明确参考谁。
2. Rem 使用的范围比较广，元素的高度宽度、border 宽度、字号大小、间距和偏移量等都可以用 rem 做单位
3. Rem 适配的时候不需要做多套样式，可以直接按比例改变 HTML字体的大小。

Rem 适配的缺点：

1. Rem 是 CSS3 的属性，只有比较新的浏览器上可以使用，一般都是用在移动端。目前大厂的 H5 页面，基本都在使用 Rem 方式做屏幕适配了。

**四、弹性布局适配**  
最后说一下弹性布局，这也是 CSS3 里出现的一种适配方式。弹性布局融合了百分比布局和固定宽度布局的优点，并且用起来更加简单。弹性布局下盒模型可以不用指定宽度，直接让盒子把可利用空间填满，这样既不用去计算盒子的宽度，也不用担心固定宽度元素和需要适配的元素在同一行显示的问题了。

缺点就是兼容性问题
